<template>  <div class="grid md:grid-cols-3">    <div class="flex flex-col gap-3 mx-2 mt-5">      <div class="btn-group">        <button class="btn btn-primary" @click="whichPlayList('dir')">directories</button>        <button class="btn btn-secondary" @click="whichPlayList('artist')">artist</button>        <button class="btn btn-primary" @click="whichPlayList('addPlayList')">add play list</button>        <button class="btn btn-secondary" @click="whichPlayList('playLists')">play Lists</button>      </div>      <component :is="playLists[playList]" @play="play"/>      <div class="border border-2"></div>      <div v-for="a in currentPlayList" :key="a">        {{ a }}      </div>    </div>    <Player class="col-span-2" @notFound="" @finish="next" @next="next" @prevent="prevent"            @shuffle="shuffle" @loop="loop"            :music="currentMusic" :hasLoop="setting.hasLoop" :hasShuffle="setting.hasShuffle"            :hasNext="setting.hasShuffle || setting.hasLoop ||setting.numberOfMusicOnList !== currentPlayList.length - 1"            :hasPrevent="setting.hasShuffle || setting.hasLoop || setting.numberOfMusicOnList !== 0"    />  </div></template><script setup lang="ts">import Directories from "./components/playList/Directories.vue"import Artists from "./components/playList/Artists.vue"import AddPlayList from "./components/playList/AddPlayList.vue"import PlayLists from "./components/playList/PlayLists.vue"import Player from "./components/Player.vue";import {onMounted, ref, watch} from "vue";import type {Ref} from "vue"import {storeToRefs} from "pinia";import {useMusic} from "./store/Musics";import {useSetting} from "./store/setting";const Music = useMusic()const Setting = useSetting()const {allMusic, currentPlayList, currentPlayListName} = storeToRefs(Music);const {setting} = storeToRefs(Setting)const playLists = {  'dir': Directories,  'artist': Artists,  'addPlayList': AddPlayList,  'playLists': PlayLists}const playList: Ref<string> = ref("addPlayList")function goTo(name: string) {  whichPlayList('playLists')}function whichPlayList(name: string) {  playList.value = name}function play() {  Setting.setNumberOfMusicOnList(0)  getCurrentMusic()}function shuffle() {  Setting.setHasShuffle(!setting.value.hasShuffle)}function loop() {  Setting.setHasLoop(!setting.value.hasLoop)}const currentMusic = ref()function getRandom(): number {  let num: number = setting.value.numberOfMusicOnList  while (num == setting.value.numberOfMusicOnList) {    num = Math.floor((Math.random() * currentPlayList.value.length) % currentPlayList.value.length)  }  return num}function prevent() {  if (setting.value.hasShuffle)    Setting.setNumberOfMusicOnList(getRandom())  else    Setting.setNumberOfMusicOnList(setting.value.numberOfMusicOnList - 1);  if (setting.value.numberOfMusicOnList < 0) {    if (setting.value.hasLoop)      Setting.setNumberOfMusicOnList(currentPlayList.value.length - 1)  }  getCurrentMusic()}function next() {  if (setting.value.hasShuffle)    Setting.setNumberOfMusicOnList(getRandom())  else    Setting.setNumberOfMusicOnList(setting.value.numberOfMusicOnList + 1);  if (setting.value.numberOfMusicOnList > currentPlayList.value.length - 1) {    if (setting.value.hasLoop)      Setting.setNumberOfMusicOnList(0)  }  getCurrentMusic()}function getCurrentMusic() {  const n = setting.value.numberOfMusicOnList  let key = currentPlayList.value[n]  currentMusic.value = allMusic.value[key]}watch(() => currentPlayList.value, () => {  Setting.setNumberOfMusicOnList(0)  getCurrentMusic()})watch(() => currentPlayListName.value, () => {  Setting.setNumberOfMusicOnList(0)  getCurrentMusic()})onMounted(() => {  getCurrentMusic()})</script>